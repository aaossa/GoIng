<%= form_with(model: request, local: true) do |form| %>
    <!-- Errors explanation -->
    <% if request.errors.any? %>
        <%= errors_for(request, "tu petici贸n") %>
    <% end %>
    <!-- Participants -->
    <div class="form-group">
        <%= form.label :participants, "Correos de los alumnos participantes", class: "col-md-6 control-label" %>
        <div class="form-row">
            <%= form.fields_for :participants, OpenStruct.new(form.object.participants || {}) do |participant| %>
            <div class="col-md-3">
                <%= participant.email_field("0", { class: "form-control", multiple: true, name: 'request[participants][0]', 'aria-describedby': "emailHelp", disabled: true, value: current_user.google_email }) %>
            </div>
            <div class="col-md-3">
                <%= participant.email_field("1", { class: "form-control", multiple: true, name: 'request[participants][1]', 'aria-describedby': "emailHelp", placeholder: "Mail alumno 2" }) %>
            </div>
            <div class="col-md-3">
                <%= participant.email_field("2", { class: "form-control", multiple: true, name: 'request[participants][2]', 'aria-describedby': "emailHelp", placeholder: "Mail alumno 3" }) %>
            </div>
            <div class="col-md-3">
                <%= participant.email_field("3", { class: "form-control", multiple: true, name: 'request[participants][3]', 'aria-describedby': "emailHelp", placeholder: "Mail alumno 4" }) %>
            </div>
            <% end %>
        </div>
        <small class="form-text">No compartiremos estos correos con nadie.</small>
    </div>
    <!-- Course -->
    <div class="form-group row">
        <div class="col-md-2"></div>
        <%= form.label :course, "Curso", class: "col-md-2 col-form-label text-center" %>
        <div class="col-md-6">
            <%= form.collection_select(:course_id, Course.all, :id, :name, {}, { id: "course", onchange: "updateFromCourse();", class: "form-control" }) %>
        </div>
        <div class="col-md-2"></div>
    </div>
    <!-- Contents -->
    <div class="form-group row">
        <div class="col-md-2"></div>
        <%= form.label :contents, "Contenidos", class: "col-md-2 col-form-label text-center" %>
        <div class="col-md-6">
            <%= form.text_area(:contents, { class: "form-control" }) %>
        </div>
        <div class="col-md-2"></div>
    </div>
    <!-- Preferences (1) -->
    <div class="form-group row">
        <div class="col-md-2"></div>
        <%= form.label :first_preference, "Opci贸n 1", class: "col-md-2 col-form-label text-center" %>
        <div class="col-md-3">
            <%= form.collection_select(:preference_blocks, {}, nil, nil, {}, { name: 'request[preference_blocks][]', id: "first_preference", onchange: "updateFromTimeBlock(1);", class: "form-control" }) %>
        </div>
        <div class="col-md-3">
            <%= form.collection_select(:preference_dates, [], nil, nil, {}, { name: 'request[preference_dates][]', id: "first_date", include_blank: true, default: nil, class: "form-control" }) %>
        </div>
        <div class="col-md-2"></div>
    </div>
    <!-- Preferences (2) -->
    <div class="form-group row">
        <div class="col-md-2"></div>
        <%= form.label :second_preference, "Opci贸n 2", class: "col-md-2 col-form-label text-center" %>
        <div class="col-md-3">
            <%= form.collection_select(:preference_blocks, {}, nil, nil, {}, { name: 'request[preference_blocks][]', id: "second_preference", onchange: "updateFromTimeBlock(2);", class: "form-control" }) %>
        </div>
        <div class="col-md-3">
            <%= form.collection_select(:preference_dates, [], nil, nil, {}, { name: 'request[preference_dates][]', id: "second_date", include_blank: true, default: nil, class: "form-control" }) %>
        </div>
        <div class="col-md-2"></div>
    </div>
    <!-- Preferences (3) -->
    <div class="form-group row">
        <div class="col-md-2"></div>
        <%= form.label :third_preference, "Opci贸n 3", class: "col-md-2 col-form-label text-center" %>
        <div class="col-md-3">
            <%= form.collection_select(:preference_blocks, {}, nil, nil, {}, { name: 'request[preference_blocks][]', id: "third_preference", onchange: "updateFromTimeBlock(3);", class: "form-control" }) %>
        </div>
        <div class="col-md-3">
            <%= form.collection_select(:preference_dates, [], nil, nil, {}, { name: 'request[preference_dates][]', id: "third_date", include_blank: true, default: nil, class: "form-control" }) %>
        </div>
        <div class="col-md-2"></div>
    </div>
    <!-- Submit -->
    <div class="form-actions">
        <div class="col-auto">
            <%= button_tag(class: "btn btn-primary btn-lg") do %>
            <span class="fa fa-graduation-cap"></span> Pedir clase
            <% end %>
        </div>
    </div>
<% end %>